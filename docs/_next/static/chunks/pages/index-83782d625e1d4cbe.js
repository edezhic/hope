(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(4931)}])},4931:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return F}});var n=r(5893),o=r(7294),i=r(7948),a=r(1519),l={height:"400px"},s="#ddd",u="#bbb",c="#dacc29",d="#42d842",f="#00c184",m="#8f0",p=s,b="#41afd2",h={margin:"1em 0 0.5em 0"},g={margin:"0.1em 0 0.5em 0",opacity:0},v={x:0,y:0,fixed:{x:!0,y:!0},mass:10,font:{color:s,size:30}},y={mass:4,font:{color:u}},x={mass:4,font:{color:d}},w={mass:4,font:{color:f}},S={font:{color:p}},j={color:u,dashes:!0,arrows:{to:{enabled:!1}}},C={color:d},O={color:b},k={color:s,dashes:!0},E={clickToUse:!0,nodes:{borderWidth:0,color:"#121212",mass:.3,font:{size:22}},edges:{color:"#888",font:{size:18,color:s,strokeWidth:0},smooth:!0,width:1,arrows:{to:{enabled:!0,scaleFactor:.6}}}},_=r(6135);function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(s){l=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e){var t=e.item,r=e.i,o=N(t,2),i=o[0],l=o[1],s=c,u="";if("Break"===l)return(0,n.jsx)(a.Z,{sx:g},i);if("This"===l)u="result",s=p;else if("ListEnd"===l)u="]",s=f;else if("ListStart"===l)u="[",s=f;else if("StructEnd"===l)u="}",s=f;else if("StructStart"===l)u="{",s=f;else if("FormulaEnd"===l)u=")",s=m;else if("FormulaStart"===l)u="(",s=m;else if("string"===typeof l)u=l.toLowerCase();else if("Cmd"in l)u=l.Cmd.toLowerCase(),s=d;else if("Mod"in l)u=l.Mod.toLowerCase(),s=b;else if("Op"in l)s=m,u=l.Op.toLowerCase().replace("plus","+").replace("minus","-").replace("multiplication","*").replace("division","/");else if("Value"in l){var h=l.Value;s=p,"Number"in h&&(u=h.Number.value),"Id"in h&&(u="Ref"===h.Id.scheme?h.Id.domain.toLowerCase():h.Id.scheme.Custom),"Text"in h&&(u=h.Text),"Fact"in h&&(u=h.Fact.toString())}return 0==r&&(s="#fff"),(0,n.jsx)(_.Z,{size:"small",label:u,sx:{background:"none",color:s}},i)}var L=r(5333),Z=r(9779);function V(e){return(0,n.jsxs)(L.Z,{component:"form",noValidate:!0,autoComplete:"off",onSubmit:function(e){return e.preventDefault()},children:[(0,n.jsx)(Z.Z,{id:"standard-basic",label:"Title",fullWidth:!0,className:"script-title",variant:"standard",onChange:function(t){return e.setScript([t.target.value,e.script[1]])},value:e.script[0]}),(0,n.jsx)(Z.Z,{id:"multiline-static",label:"Body",sx:{marginBottom:2,marginTop:4},multiline:!0,rows:2,fullWidth:!0,onChange:function(t){return e.setScript([e.script[0],t.target.value])},value:e.script[1]})]})}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){M(e,t,r[t])}))}return e}var A=(0,r(5152).default)((function(){return Promise.all([r.e(814),r.e(959),r.e(123)]).then(r.bind(r,6123))}),{loadableGenerated:{webpack:function(){return[6123]}},ssr:!1});function W(e){var t=e.nodes,r=e.edges;if(0==t.length)return null;var o=t.map((function(e,t){var r,n,o,i=t;return 0==t?P({id:i,label:e.Value.Id.domain},v):"Being"==e?P({id:i,label:"be"},y):"ListStart"==e?P({id:i,label:"list"},w):"This"==e?P({id:i,label:"result"},S):"Ref"==(null===(r=e.Value)||void 0===r||null===(n=r.Id)||void 0===n?void 0:n.scheme)?P({id:i,label:e.Value.Id.domain},S):(null===(o=e.Value)||void 0===o?void 0:o.Number)?P({id:i,label:e.Value.Number.value},S):e.Cmd?P({id:i,label:e.Cmd},x):void 0})),i=r.map((function(e){var t=e[0],r=e[1];return e[2].Mod?P({from:t,to:r,label:e[2].Mod},j):"Request"==e[2].Cmd?P({from:t,to:r},O):"Store"==e[2].Cmd?P({from:t,to:r},C):"Then"==e[2]?P({from:t,to:r},k):void 0}));return(0,n.jsx)(A,{graph:{nodes:o,edges:i},options:E,style:l})}function F(){var e=(0,o.useState)({nodes:[],edges:[]}),t=e[0],l=e[1],s=(0,o.useState)(["",""]),u=s[0],c=s[1],d=(0,o.useState)([]),f=d[0],m=d[1],p=(0,o.useRef)();return(0,o.useEffect)((function(){p.current=new Worker(new URL(r.p+r.u(57),r.b)),p.current.addEventListener("message",(function(e){"test"==e.data.type&&c(e.data.tests),"tokens&graph"==e.data.type&&(m(e.data.tokens),l(e.data.graph))})),p.current.postMessage({type:"get_test"})}),[]),(0,o.useEffect)((function(){p.current&&""!=u[0]&&p.current.postMessage({type:"build",title:u[0],body:u[1]})}),[u]),(0,n.jsxs)(i.Z,{maxWidth:"md",children:[(0,n.jsx)(a.Z,{sx:h,children:"Script"}),(0,n.jsx)(V,{script:u,setScript:c}),(0,n.jsx)(a.Z,{sx:h,children:"Tokens (example for syntax highlight)"}),null===f||void 0===f?void 0:f.map((function(e,t){return(0,n.jsx)(I,{item:e,i:t},JSON.stringify(e)+t)})),(0,n.jsx)(a.Z,{sx:h,children:"Graph"}),(0,n.jsx)(W,{nodes:t.nodes,edges:t.edges})]})}}},function(e){e.O(0,[216,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);